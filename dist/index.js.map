{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport axios from 'axios';\r\n\r\n// --- TEMA DEÄžÄ°ÅžTÄ°RME MANTIÄžI ---\r\nconst themeToggle = document.querySelector('#theme-toggle');\r\nconst body = document.body;\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const savedTheme = localStorage.getItem('theme');\r\n  if (savedTheme === 'dark') {\r\n    body.classList.add('dark-mode');\r\n    themeToggle.checked = true;\r\n  } else {\r\n    body.classList.remove('dark-mode');\r\n    themeToggle.checked = false;\r\n  }\r\n});\r\n\r\nthemeToggle.addEventListener('change', () => {\r\n  if (themeToggle.checked) {\r\n    body.classList.add('dark-mode');\r\n    localStorage.setItem('theme', 'dark');\r\n  } else {\r\n    body.classList.remove('dark-mode');\r\n    localStorage.setItem('theme', 'light');\r\n  }\r\n});\r\n\r\n// --- TEMA MANTIÄžI BÄ°TÄ°Åž ---\r\n\r\n// --- DOM SeÃ§icileri ---\r\nconst searchForm = document.querySelector('#search-form');\r\nconst galleryContainer = document.querySelector('.gallery');\r\nconst loader = document.querySelector('.loader');\r\nconst loaderText = document.querySelector('.loader-text');\r\nconst loadMoreBtn = document.querySelector('.load-more-btn');\r\nconst categoryContainer = document.querySelector('#search-categories');\r\n\r\n// --- API ve Durum (State) DeÄŸiÅŸkenleri ---\r\nconst API_KEY = '32475203-0397f154fda8b2c2a6bae1f0a';\r\nconst PER_PAGE = 40;\r\n\r\nlet currentPage = 1;\r\nlet currentQuery = '';\r\nlet totalHits = 0;\r\nlet currentBaseUrl = 'https://pixabay.com/api/';\r\nlet currentCategoryType = 'all';\r\n\r\nconst lightbox = new SimpleLightbox('.gallery a[data-type=\"image\"]', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});\r\n\r\n// --- Olay Dinleyicileri ---\r\nsearchForm.addEventListener('submit', onSearchSubmit);\r\nloadMoreBtn.addEventListener('click', onLoadMore);\r\ncategoryContainer.addEventListener('click', onCategoryClick);\r\ngalleryContainer.addEventListener('click', onGalleryClick);\r\n\r\n// --- Galeri TÄ±klama YÃ¶neticisi ---\r\nfunction onGalleryClick(event) {\r\n  const clickedLink = event.target.closest('a');\r\n  if (!clickedLink) return;\r\n\r\n  if (clickedLink.dataset.type === 'video') {\r\n    event.preventDefault();\r\n    const videoUrl = clickedLink.dataset.videoSrc;\r\n    showVideoModal(videoUrl);\r\n  }\r\n}\r\n\r\n// --- Video Modal GÃ¶sterme Fonksiyonu ---\r\nfunction showVideoModal(videoUrl) {\r\n  const modalMarkup = `\r\n    <div class=\"video-modal-overlay\">\r\n      <div class=\"video-modal-content\">\r\n        <button class=\"modal-close-btn\">&times;</button>\r\n        <video src=\"${videoUrl}\" controls autoplay></video>\r\n      </div>\r\n    </div>\r\n  `;\r\n  document.body.insertAdjacentHTML('beforeend', modalMarkup);\r\n\r\n  const modalOverlay = document.querySelector('.video-modal-overlay');\r\n  modalOverlay\r\n    .querySelector('.modal-close-btn')\r\n    .addEventListener('click', closeVideoModal);\r\n  modalOverlay.addEventListener('click', event => {\r\n    if (event.target === modalOverlay) {\r\n      closeVideoModal();\r\n    }\r\n  });\r\n\r\n  document.addEventListener('keydown', onEscKey);\r\n}\r\n\r\n// --- Video Modal Kapatma Fonksiyonu ---\r\nfunction closeVideoModal() {\r\n  const modalOverlay = document.querySelector('.video-modal-overlay');\r\n  if (modalOverlay) {\r\n    document.body.removeChild(modalOverlay);\r\n  }\r\n  document.removeEventListener('keydown', onEscKey);\r\n}\r\n\r\n// --- ESC TuÅŸu Dinleyicisi ---\r\nfunction onEscKey(event) {\r\n  if (event.key === 'Escape') {\r\n    closeVideoModal();\r\n  }\r\n}\r\n\r\n// --- Kategori DeÄŸiÅŸtirme Fonksiyonu ---\r\nfunction onCategoryClick(event) {\r\n  event.preventDefault();\r\n  const target = event.target;\r\n\r\n  if (target.tagName !== 'BUTTON') return;\r\n\r\n  categoryContainer.querySelectorAll('.category-btn').forEach(btn => {\r\n    btn.classList.remove('active');\r\n  });\r\n  target.classList.add('active');\r\n\r\n  currentBaseUrl = target.dataset.url;\r\n  currentCategoryType = target.dataset.type;\r\n\r\n  galleryContainer.innerHTML = '';\r\n  hideLoadMoreBtn();\r\n  currentQuery = searchForm.elements.searchQuery.value.trim();\r\n  if (currentQuery) {\r\n    onSearchSubmit(new Event('submit'));\r\n  }\r\n}\r\n\r\n// --- Yeni Arama Fonksiyonu ---\r\nasync function onSearchSubmit(event) {\r\n  event.preventDefault();\r\n  const form =\r\n    event.currentTarget.tagName === 'FORM' ? event.currentTarget : searchForm;\r\n  const searchQuery = form.elements.searchQuery.value.trim();\r\n\r\n  if (!searchQuery) {\r\n    iziToast.error({\r\n      title: 'Hata',\r\n      message: 'Arama kutusu boÅŸ olamaz!',\r\n      position: 'topRight',\r\n    });\r\n    return;\r\n  }\r\n\r\n  currentQuery = searchQuery;\r\n  currentPage = 1;\r\n  galleryContainer.innerHTML = '';\r\n  hideLoadMoreBtn();\r\n  showLoader();\r\n\r\n  try {\r\n    const data = await fetchImages(currentQuery, currentPage);\r\n    totalHits = data.totalHits;\r\n\r\n    if (totalHits === 0) {\r\n      iziToast.info({\r\n        title: 'Bilgi',\r\n        message:\r\n          'Sorry, there are no images matching your search query. Please try again!',\r\n        position: 'topRight',\r\n      });\r\n    } else {\r\n      renderGallery(data.hits);\r\n      lightbox.refresh();\r\n      checkEndAndUpdateButton();\r\n    }\r\n  } catch (error) {\r\n    handleError(error);\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n}\r\n\r\n// --- \"Daha Fazla YÃ¼kle\" Fonksiyonu ---\r\nasync function onLoadMore() {\r\n  currentPage += 1;\r\n  hideLoadMoreBtn();\r\n  showLoader();\r\n\r\n  try {\r\n    const data = await fetchImages(currentQuery, currentPage);\r\n    renderGallery(data.hits);\r\n    lightbox.refresh();\r\n    smoothScroll();\r\n    checkEndAndUpdateButton();\r\n  } catch (error) {\r\n    handleError(error);\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n}\r\n\r\n// --- API Ä°steÄŸi ---\r\nasync function fetchImages(query, page) {\r\n  const params = {\r\n    key: API_KEY,\r\n    q: query,\r\n    page: page,\r\n    per_page: PER_PAGE,\r\n    safesearch: 'true',\r\n  };\r\n\r\n  if (currentCategoryType === 'video') {\r\n    currentBaseUrl = 'https://pixabay.com/api/videos/';\r\n  } else {\r\n    currentBaseUrl = 'https://pixabay.com/api/';\r\n    params.orientation = 'horizontal';\r\n    if (currentCategoryType !== 'all') {\r\n      params.image_type = currentCategoryType;\r\n    }\r\n  }\r\n\r\n  const response = await axios.get(currentBaseUrl, { params });\r\n  return response.data;\r\n}\r\n\r\n// --- Galeri Render Fonksiyonu (Kapak GÃ¶rseli DÃœZELTÄ°LDÄ°) ---\r\nfunction renderGallery(hits) {\r\n  let markup = '';\r\n\r\n  if (currentCategoryType === 'video') {\r\n    markup = hits\r\n      .map(\r\n        ({\r\n          videos,\r\n          picture_id, // ðŸ‘ˆ Kapak iÃ§in kullanÄ±yoruz\r\n          tags,\r\n          likes,\r\n          views,\r\n          comments,\r\n          downloads,\r\n        }) => {\r\n          const smallVideoUrl = videos.medium.url;\r\n          // âœ… Vimeo CDN'den kapak gÃ¶rseli al\r\n          const thumbnailUrl = `https://i.vimeocdn.com/video/${picture_id}_640x360.jpg`;\r\n\r\n          return `<li class=\"gallery-item\">\r\n            <a class=\"gallery-link\" href=\"#\" data-type=\"video\" data-video-src=\"${smallVideoUrl}\">\r\n              <img class=\"gallery-image\" src=\"${thumbnailUrl}\" alt=\"${tags}\" loading=\"lazy\"/>\r\n            </a>\r\n            <div class=\"info\">\r\n              <p class=\"info-item\"><b>Likes</b> ${likes}</p>\r\n              <p class=\"info-item\"><b>Views</b> ${views}</p>\r\n              <p class=\"info-item\"><b>Comments</b> ${comments}</p>\r\n              <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\r\n            </div>\r\n          </li>`;\r\n        }\r\n      )\r\n      .join('');\r\n  } else {\r\n    // Resim kÄ±smÄ±\r\n    markup = hits\r\n      .map(\r\n        ({\r\n          webformatURL,\r\n          largeImageURL,\r\n          tags,\r\n          likes,\r\n          views,\r\n          comments,\r\n          downloads,\r\n        }) => `<li class=\"gallery-item\">\r\n            <a class=\"gallery-link\" href=\"${largeImageURL}\" data-type=\"image\">\r\n              <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\r\n            </a>\r\n            <div class=\"info\">\r\n              <p class=\"info-item\"><b>Likes</b> ${likes}</p>\r\n              <p class=\"info-item\"><b>Views</b> ${views}</p>\r\n              <p class=\"info-item\"><b>Comments</b> ${comments}</p>\r\n              <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\r\n            </div>\r\n          </li>`\r\n      )\r\n      .join('');\r\n  }\r\n\r\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\n// --- YardÄ±mcÄ± Fonksiyonlar ---\r\nfunction showLoader() {\r\n  loader.classList.remove('hidden');\r\n  loaderText.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoader() {\r\n  loader.classList.add('hidden');\r\n  loaderText.classList.add('hidden');\r\n}\r\n\r\nfunction showLoadMoreBtn() {\r\n  loadMoreBtn.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoadMoreBtn() {\r\n  loadMoreBtn.classList.add('hidden');\r\n}\r\n\r\nfunction checkEndAndUpdateButton() {\r\n  if (currentPage * PER_PAGE >= totalHits) {\r\n    hideLoadMoreBtn();\r\n    if (totalHits > 0) {\r\n      iziToast.info({\r\n        title: 'Bilgi',\r\n        message: \"We're sorry, but you've reached the end of search results.\",\r\n        position: 'topRight',\r\n      });\r\n    }\r\n  } else {\r\n    showLoadMoreBtn();\r\n  }\r\n}\r\n\r\nfunction smoothScroll() {\r\n  const firstCard = galleryContainer.querySelector('.gallery-item');\r\n  if (firstCard) {\r\n    const { height: cardHeight } = firstCard.getBoundingClientRect();\r\n    window.scrollBy({\r\n      top: cardHeight * 1.5,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n}\r\n\r\nfunction handleError(error) {\r\n  iziToast.error({\r\n    title: 'Hata',\r\n    message: `Bir hata oluÅŸtu: ${error.message}`,\r\n    position: 'topRight',\r\n  });\r\n  console.error('Fetch Error:', error);\r\n}\r\n"],"names":["themeToggle","body","searchForm","galleryContainer","loader","loaderText","loadMoreBtn","categoryContainer","API_KEY","PER_PAGE","currentPage","currentQuery","totalHits","currentBaseUrl","currentCategoryType","lightbox","SimpleLightbox","onSearchSubmit","onLoadMore","onCategoryClick","onGalleryClick","event","clickedLink","videoUrl","showVideoModal","modalMarkup","modalOverlay","closeVideoModal","onEscKey","target","btn","hideLoadMoreBtn","searchQuery","iziToast","showLoader","data","fetchImages","renderGallery","checkEndAndUpdateButton","error","handleError","hideLoader","smoothScroll","query","page","params","axios","hits","markup","videos","picture_id","tags","likes","views","comments","downloads","smallVideoUrl","thumbnailUrl","webformatURL","largeImageURL","showLoadMoreBtn","firstCard","cardHeight"],"mappings":"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"}