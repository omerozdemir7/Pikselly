{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n// --- TEMA DEÄžÄ°ÅžTÄ°RME MANTIÄžI ---\nconst themeToggle = document.querySelector('#theme-toggle');\nconst body = document.body;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const savedTheme = localStorage.getItem('theme');\n  if (savedTheme === 'dark') {\n    body.classList.add('dark-mode');\n    themeToggle.checked = true;\n  } else {\n    body.classList.remove('dark-mode');\n    themeToggle.checked = false;\n  }\n});\n\nthemeToggle.addEventListener('change', () => {\n  if (themeToggle.checked) {\n    body.classList.add('dark-mode');\n    localStorage.setItem('theme', 'dark');\n  } else {\n    body.classList.remove('dark-mode');\n    localStorage.setItem('theme', 'light');\n  }\n});\n\n// --- TEMA MANTIÄžI BÄ°TÄ°Åž ---\n\n// --- DOM SeÃ§icileri ---\nconst searchForm = document.querySelector('#search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderText = document.querySelector('.loader-text');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst categoryContainer = document.querySelector('#search-categories');\n\n// --- API ve Durum (State) DeÄŸiÅŸkenleri ---\nconst API_KEY = '32475203-0397f154fda8b2c2a6bae1f0a';\nconst PER_PAGE = 40;\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nlet currentBaseUrl = 'https://pixabay.com/api/';\nlet currentCategoryType = 'all';\n\nconst lightbox = new SimpleLightbox('.gallery a[data-type=\"image\"]', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// --- Olay Dinleyicileri ---\nsearchForm.addEventListener('submit', onSearchSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\ncategoryContainer.addEventListener('click', onCategoryClick);\ngalleryContainer.addEventListener('click', onGalleryClick);\n\n// --- Galeri TÄ±klama YÃ¶neticisi ---\nfunction onGalleryClick(event) {\n  const clickedLink = event.target.closest('a');\n  if (!clickedLink) return;\n\n  if (clickedLink.dataset.type === 'video') {\n    event.preventDefault();\n    const videoUrl = clickedLink.dataset.videoSrc;\n    showVideoModal(videoUrl);\n  }\n}\n\n// --- Video Modal GÃ¶sterme Fonksiyonu ---\nfunction showVideoModal(videoUrl) {\n  const modalMarkup = `\n    <div class=\"video-modal-overlay\">\n      <div class=\"video-modal-content\">\n        <button class=\"modal-close-btn\">&times;</button>\n        <video src=\"${videoUrl}\" controls autoplay></video>\n      </div>\n    </div>\n  `;\n  document.body.insertAdjacentHTML('beforeend', modalMarkup);\n\n  const modalOverlay = document.querySelector('.video-modal-overlay');\n  modalOverlay\n    .querySelector('.modal-close-btn')\n    .addEventListener('click', closeVideoModal);\n  modalOverlay.addEventListener('click', event => {\n    if (event.target === modalOverlay) {\n      closeVideoModal();\n    }\n  });\n\n  document.addEventListener('keydown', onEscKey);\n}\n\n// --- Video Modal Kapatma Fonksiyonu ---\nfunction closeVideoModal() {\n  const modalOverlay = document.querySelector('.video-modal-overlay');\n  if (modalOverlay) {\n    document.body.removeChild(modalOverlay);\n  }\n  document.removeEventListener('keydown', onEscKey);\n}\n\n// --- ESC TuÅŸu Dinleyicisi ---\nfunction onEscKey(event) {\n  if (event.key === 'Escape') {\n    closeVideoModal();\n  }\n}\n\n// --- Kategori DeÄŸiÅŸtirme Fonksiyonu ---\nfunction onCategoryClick(event) {\n  event.preventDefault();\n  const target = event.target;\n\n  if (target.tagName !== 'BUTTON') return;\n\n  categoryContainer.querySelectorAll('.category-btn').forEach(btn => {\n    btn.classList.remove('active');\n  });\n  target.classList.add('active');\n\n  currentBaseUrl = target.dataset.url;\n  currentCategoryType = target.dataset.type;\n\n  galleryContainer.innerHTML = '';\n  hideLoadMoreBtn();\n  currentQuery = searchForm.elements.searchQuery.value.trim();\n  if (currentQuery) {\n    onSearchSubmit(new Event('submit'));\n  }\n}\n\n// --- Yeni Arama Fonksiyonu ---\nasync function onSearchSubmit(event) {\n  event.preventDefault();\n  const form =\n    event.currentTarget.tagName === 'FORM' ? event.currentTarget : searchForm;\n  const searchQuery = form.elements.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Hata',\n      message: 'Arama kutusu boÅŸ olamaz!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentQuery = searchQuery;\n  currentPage = 1;\n  galleryContainer.innerHTML = '';\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (totalHits === 0) {\n      iziToast.info({\n        title: 'Bilgi',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      renderGallery(data.hits);\n      lightbox.refresh();\n      checkEndAndUpdateButton();\n    }\n  } catch (error) {\n    handleError(error);\n  } finally {\n    hideLoader();\n  }\n}\n\n// --- \"Daha Fazla YÃ¼kle\" Fonksiyonu ---\nasync function onLoadMore() {\n  currentPage += 1;\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    renderGallery(data.hits);\n    lightbox.refresh();\n    smoothScroll();\n    checkEndAndUpdateButton();\n  } catch (error) {\n    handleError(error);\n  } finally {\n    hideLoader();\n  }\n}\n\n// --- API Ä°steÄŸi ---\nasync function fetchImages(query, page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    page: page,\n    per_page: PER_PAGE,\n    safesearch: 'true',\n  };\n\n  if (currentCategoryType === 'video') {\n    currentBaseUrl = 'https://pixabay.com/api/videos/';\n  } else {\n    currentBaseUrl = 'https://pixabay.com/api/';\n    params.orientation = 'horizontal';\n    if (currentCategoryType !== 'all') {\n      params.image_type = currentCategoryType;\n    }\n  }\n\n  const response = await axios.get(currentBaseUrl, { params });\n  return response.data;\n}\n\n// --- Galeri Render Fonksiyonu (Kapak GÃ¶rseli DÃœZELTÄ°LDÄ°) ---\nfunction renderGallery(hits) {\n  let markup = '';\n\n  if (currentCategoryType === 'video') {\n    markup = hits\n      .map(\n        ({\n          videos,\n          picture_id, // ðŸ‘ˆ Kapak iÃ§in kullanÄ±yoruz\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          const smallVideoUrl = videos.medium.url;\n          // âœ… Vimeo CDN'den kapak gÃ¶rseli al\n          const thumbnailUrl = `https://i.vimeocdn.com/video/${picture_id}_640x360.jpg`;\n\n          return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"#\" data-type=\"video\" data-video-src=\"${smallVideoUrl}\">\n              <img class=\"gallery-image\" src=\"${thumbnailUrl}\" alt=\"${tags}\" loading=\"lazy\"/>\n            </a>\n            <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n              <p class=\"info-item\"><b>Views</b> ${views}</p>\n              <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n            </div>\n          </li>`;\n        }\n      )\n      .join('');\n  } else {\n    // Resim kÄ±smÄ±\n    markup = hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\" data-type=\"image\">\n              <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n            </a>\n            <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n              <p class=\"info-item\"><b>Views</b> ${views}</p>\n              <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n            </div>\n          </li>`\n      )\n      .join('');\n  }\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n}\n\n// --- YardÄ±mcÄ± Fonksiyonlar ---\nfunction showLoader() {\n  loader.classList.remove('hidden');\n  loaderText.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n  loaderText.classList.add('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkEndAndUpdateButton() {\n  if (currentPage * PER_PAGE >= totalHits) {\n    hideLoadMoreBtn();\n    if (totalHits > 0) {\n      iziToast.info({\n        title: 'Bilgi',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction smoothScroll() {\n  const firstCard = galleryContainer.querySelector('.gallery-item');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nfunction handleError(error) {\n  iziToast.error({\n    title: 'Hata',\n    message: `Bir hata oluÅŸtu: ${error.message}`,\n    position: 'topRight',\n  });\n  console.error('Fetch Error:', error);\n}\n"],"names":["themeToggle","body","searchForm","galleryContainer","loader","loaderText","loadMoreBtn","categoryContainer","API_KEY","PER_PAGE","currentPage","currentQuery","totalHits","currentBaseUrl","currentCategoryType","lightbox","SimpleLightbox","onSearchSubmit","onLoadMore","onCategoryClick","onGalleryClick","event","clickedLink","videoUrl","showVideoModal","modalMarkup","modalOverlay","closeVideoModal","onEscKey","target","btn","hideLoadMoreBtn","searchQuery","iziToast","showLoader","data","fetchImages","renderGallery","checkEndAndUpdateButton","error","handleError","hideLoader","smoothScroll","query","page","params","axios","hits","markup","videos","picture_id","tags","likes","views","comments","downloads","smallVideoUrl","thumbnailUrl","webformatURL","largeImageURL","showLoadMoreBtn","firstCard","cardHeight"],"mappings":"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"}